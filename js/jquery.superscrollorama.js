(function(a){a.superscrollorama=function(m){var c=this;var f={isVertical:true,triggerAtCenter:true,playoutAnimations:true,reverse:true};c.settings=a.extend({},f,m);var b=[],d=[],l=false;function k(){a("html, body").animate({scrollTop:0},0);a(window).scroll(function(){l=true});TweenLite.ticker.addEventListener("tick",j)}function j(){if(l){h();l=false}}function e(n){n.el.css("position",n.origPosition);n.el.css("top",n.origPositioning.top);n.el.css("bottom",n.origPositioning.bottom);n.el.css("left",n.origPositioning.left);n.el.css("right",n.origPositioning.right)}function g(o,n){if(o.totalProgress){o.totalProgress(n).pause()}else{o.progress(n).pause()}}function h(){var x=c.settings.isVertical?a(window).scrollTop():a(window).scrollLeft();var n=c.settings.triggerAtCenter?(c.settings.isVertical?-a(window).height()/2:-a(window).width()/2):0;var t,o,y;var A=b.length;for(t=0;t<A;t++){var q=b[t],w=q.target,s=q.offset;if(typeof(w)==="string"){o=c.settings.isVertical?a(w).offset().top:a(w).offset().left;s+=n}else{if(typeof(w)==="number"){o=w}else{if(a.isFunction(w)){o=w.call(this)}else{o=c.settings.isVertical?w.offset().top:w.offset().left;s+=n}}}o+=s;y=q.dur?o+q.dur:o;if((x>o&&x<y)&&q.state!=="TWEENING"){q.state="TWEENING";q.start=o;q.end=y;g(q.tween,(x-q.start)/(q.end-q.start))}else{if(x<o&&q.state!=="BEFORE"&&q.reverse){if(c.settings.playoutAnimations){q.tween.reverse()}else{g(q.tween,0)}q.state="BEFORE"}else{if(x>y&&q.state!=="AFTER"){if(c.settings.playoutAnimations){q.tween.play()}else{g(q.tween,1)}q.state="AFTER"}else{if(q.state==="TWEENING"){g(q.tween,(x-q.start)/(q.end-q.start))}}}}}var z=d.length;for(t=0;t<z;t++){var B=d[t];var p=B.el;var v=p.outerHeight();if(B.state!="PINNED"){if(B.state==="UPDATE"){e(B)}o=B.spacer?c.settings.isVertical?B.spacer.offset().top:B.spacer.offset().left:c.settings.isVertical?p.offset().top:p.offset().left;o+=B.offset;y=o+B.dur;if(x>o&&x<y){var r=B.state;B.state="PINNED";B.origPositioning={top:p.css("top"),left:p.css("left"),bottom:p.css("bottom"),right:p.css("right")};var u=p.offset();p.css("position","fixed");if(c.settings.isVertical){p.css("top",-B.offset);p.css("left",u.left)}else{p.css("left",-B.offset);p.css("top",u.top)}B.pinStart=o;B.pinEnd=y;if(B.spacer){B.spacer.css("height",B.dur+v)}if(r==="UPDATE"){if(B.anim){g(B.anim,0)}}else{if(B.onPin){B.onPin()}}g(B.anim,(x-B.pinStart)/(B.pinEnd-B.pinStart))}}else{if(x<B.pinStart||x>B.pinEnd){B.state=x<B.pinStart?"BEFORE":"AFTER";if(B.anim&&B.state==="BEFORE"){g(B.anim,0)}else{if(B.anim&&B.state==="AFTER"){g(B.anim,1)}}e(B);if(B.spacer){B.spacer.css("height",x<B.pinStart?0:B.dur)}if(B.onUnpin){B.onUnpin()}}else{if(B.anim){g(B.anim,(x-B.pinStart)/(B.pinEnd-B.pinStart))}}}}}c.addTween=function(q,o,p,r,n){o.pause();b.push({target:q,tween:o,offset:r||0,dur:p||0,reverse:n||c.settings.reverse,state:"BEFORE"});return c};c.pin=function(o,n,p){if(typeof(o)==="string"){o=a(o)}if(p.anim){p.anim.pause()}var q=null;if(o.css("position")==="relative"||o.css("position")==="static"){q=a('<div class="pin-spacer"></div>');o.before(q)}d.push({el:o,state:"BEFORE",dur:n,offset:p.offset||0,anim:p.anim,origPosition:o.css("position"),spacer:q,onPin:p.onPin,onUnpin:p.onUnpin});return c};c.updatePin=function(p,o,r){if(typeof(p)==="string"){p=a(p)}if(r.anim){r.anim.pause()}var n=d.length;for(i=0;i<n;i++){var q=d[i];if(p.get(0)==q.el.get(0)){if(o){q.dur=o}if(r.anim){q.anim=r.anim}if(r.offset){q.offset=r.offset}if(r.onPin){q.onPin=r.onPin}if(r.onUnpin){q.onUnpin=r.onUnpin}if((o||r.anim||r.offset)&&q.state==="PINNED"){q.state="UPDATE";h()}}}return c};c.triggerCheckAnim=function(n){if(n){h()}else{l=true}return c};k();return c}})(jQuery);